<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Responsive Slider with Audio</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    html, body {
      margin: 0;
      padding: 0;
      background: #f6f8fb;
    }
    * {
      box-sizing: border-box;
    }

    .slider-wrap {
      margin: 0 auto;
      padding: 0;
      width: 100%;
      max-width: 900px;
      aspect-ratio: 16 / 9;
      background: #eee;
      border-radius: 22px;
      box-shadow: 0 2px 24px #3f51b11a;
      position: relative;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      touch-action: pan-y;
      user-select: none;
    }

    .slider-wrap .slide-img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: opacity 0.6s cubic-bezier(.4,0,.2,1);
      opacity: 1;
      border-radius: 20px;
      box-shadow: 0 2px 16px #3f51b122;
      pointer-events: none;
    }
    .slider-wrap .slide-img.fadeout {
      opacity: 0;
    }
    .slider-wrap .arrow {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      width: 48px;
      height: 48px;
      border-radius: 50%;
      background: rgba(255,255,255,0.45);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2.2rem;
      color: #333;
      z-index: 5;
      cursor: pointer;
      opacity: 0.77;
      border: none;
      outline: none;
      transition: background 0.18s, opacity 0.18s;
    }
    .slider-wrap .arrow:active {
      opacity: 1;
      background: rgba(255,255,255,0.85);
    }
    .slider-wrap .arrow.left {
      left: 18px;
    }
    .slider-wrap .arrow.right {
      right: 18px;
    }
    .slider-wrap .audio-btn {
      position: absolute;
      bottom: 24px;
      right: 24px;
      z-index: 10;
      width: 46px;
      height: 46px;
      border-radius: 50%;
      background: #fff;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 2px 8px #0002;
      border: 1.5px solid #eee;
      cursor: pointer;
      opacity: 0.93;
      transition: box-shadow .15s;
      color: #3f51b1;
      font-size: 2rem;
      outline: none;
      overflow: hidden;
    }
    .slider-wrap .audio-btn:active {
      box-shadow: 0 2px 16px #3f51b133;
    }
    .slider-wrap .audio-btn .music-icon-on {
      display: inline;
      color: #3f51b1;
      font-size: 2rem;
      pointer-events: none;
      user-select: none;
      transition: color 0.2s;
      animation: musicOnPulse 1.2s infinite alternate;
    }
    .slider-wrap .audio-btn .music-icon-off {
      display: none;
      color: #bbb;
      font-size: 2rem;
      pointer-events: none;
      user-select: none;
      transition: color 0.2s;
      animation: musicOffShake 1.1s infinite alternate;
    }
    .slider-wrap .audio-btn:not(.playing) .music-icon-on {
      display: none;
    }
    .slider-wrap .audio-btn:not(.playing) .music-icon-off {
      display: inline;
    }
    .slider-wrap .audio-btn.playing .music-icon-on {
      color: #ffc107;
      text-shadow: 0 0 12px #fff20088;
    }
    @keyframes musicOnPulse {
      0% { transform: scale(1) rotate(-3deg); }
      45% { transform: scale(1.19) rotate(4deg); }
      100% { transform: scale(1) rotate(-3deg); }
    }
    @keyframes musicOffShake {
      0% { transform: rotate(0deg); }
      20% { transform: rotate(-13deg); }
      40% { transform: rotate(0deg); }
      60% { transform: rotate(11deg); }
      80% { transform: rotate(0deg); }
      100% { transform: rotate(-8deg); }
    }
    .slider-wrap .timer-fab {
      position: absolute;
      bottom: 24px;
      left: 24px;
      z-index: 10;
      width: 42px;
      height: 42px;
      border-radius: 50%;
      background: #fff;
      color: #3f51b1;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 2px 8px #2196f355;
      border: 1.5px solid #76c7b7;
      font-size: 1.14rem;
      font-weight: 700;
      letter-spacing: 0.5px;
      opacity: 0.94;
      user-select: none;
      transition: box-shadow .15s;
    }
    .slider-wrap .timer-fab:active {
      box-shadow: 0 2px 16px #76c7b744;
    }
    .slider-wrap .slider-dots {
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      bottom: 16px;
      display: flex;
      gap: 14px;
      z-index: 20;
    }
    .slider-wrap .slider-dot {
      width: 13px;
      height: 13px;
      border-radius: 50%;
      background: #fff;
      border: 2.5px solid #bdc7e0;
      transition: border-color 0.2s, background 0.2s;
      cursor: pointer;
      box-shadow: 0 1px 5px #0001;
      opacity: 0.84;
      outline: none;
    }
    .slider-wrap .slider-dot.active {
      border-color: #3f51b1;
      background: #3f51b1;
      opacity: 1;
    }

    @media (max-width: 600px) {
      .slider-wrap {
        max-width: 98vw;
        aspect-ratio: 16 / 10;
        padding: 0 6px;
      }
      .slider-wrap .audio-btn {
        width: 32px;
        height: 32px;
        right: 8px;
        bottom: 8px;
      }
      .slider-wrap .audio-btn .music-icon-on,
      .slider-wrap .audio-btn .music-icon-off {
        font-size: 1.3rem;
      }
      .slider-wrap .timer-fab {
        width: 32px;
        height: 32px;
        left: 8px;
        bottom: 8px;
        font-size: 0.95rem;
      }
      .slider-wrap .slider-dot {
        width: 10px;
        height: 10px;
      }
      .slider-wrap .slider-dots {
        gap: 8px;
        bottom: 7px;
      }
    }
  </style>
</head>
<body>

  <div class="slider-wrap" id="slider1" tabindex="0" aria-label="Hero Slider">
    <img src="https://raw.githubusercontent.com/hafizulcode/hafiz_space/eadacec975471ef98c339e369ebfcfd2f7410025/image1.jpg" class="slide-img" alt="Slide 1" loading="lazy">
    <button class="arrow left" aria-label="Previous slide">&#8249;</button>
    <button class="arrow right" aria-label="Next slide">&#8250;</button>
    <button class="audio-btn" id="audioBtn" aria-label="Toggle background music" aria-pressed="false">
      <span class="music-icon-on" aria-label="Music On" title="Music On">ðŸ”Š</span>
      <span class="music-icon-off" aria-label="Music Off" title="Music Off">ðŸ”‡</span>
    </button>
    <span class="timer-fab" id="timerFab">4s</span>
    <div class="slider-dots" id="sliderDots"></div>
    <audio id="sliderMusic" preload="none" loop>
      <source src="https://www.bensound.com/bensound-music/bensound-sunny.mp3" type="audio/mp3">
    </audio>
  </div>

  <script>
    (function() {
      const images = [
        "https://raw.githubusercontent.com/hafizulcode/hafiz_space/eadacec975471ef98c339e369ebfcfd2f7410025/image1.jpg",
        "https://images.unsplash.com/photo-1465101162946-4377e57745c3?auto=format&fit=crop&w=800&q=80",
        "https://images.unsplash.com/photo-1470770841072-f978cf4d019e?auto=format&fit=crop&w=800&q=80"
      ];

      let idx = 0, animating = false;
      const slider = document.getElementById('slider1');
      const img = slider.querySelector('.slide-img');
      const prevBtn = slider.querySelector('.arrow.left');
      const nextBtn = slider.querySelector('.arrow.right');
      const dotsWrap = document.getElementById('sliderDots');
      const audioBtn = document.getElementById('audioBtn');
      const audio = document.getElementById('sliderMusic');
      let musicOn = false;
      let timer = 4, slideInterval = null;

      function initSlider() {
        renderDots();
        show(0);
        resetTimer();
        setupEventListeners();
      }
      function renderDots() {
        dotsWrap.innerHTML = '';
        images.forEach((_, i) => {
          const dot = document.createElement('button');
          dot.className = 'slider-dot' + (i === idx ? ' active' : '');
          dot.setAttribute('aria-label', 'Go to slide ' + (i + 1));
          dot.type = 'button';
          dot.onclick = () => show(i);
          dotsWrap.appendChild(dot);
        });
      }
      function show(i) {
        if (animating) return;
        const nextIdx = (i + images.length) % images.length;
        if (nextIdx === idx) return;
        animating = true;
        img.classList.add('fadeout');
        setTimeout(() => {
          idx = nextIdx;
          img.src = images[idx];
          img.alt = 'Slide ' + (idx + 1);
          img.classList.remove('fadeout');
          animating = false;
          renderDots();
        }, 340);
      }
      function updateTimer() {
        document.getElementById('timerFab').textContent = timer + 's';
      }
      function nextAutoSlide() {
        show(idx + 1);
        resetTimer();
      }
      function resetTimer() {
        timer = 4;
        updateTimer();
        clearInterval(slideInterval);
        slideInterval = setInterval(() => {
          timer--;
          updateTimer();
          if (timer <= 0) {
            nextAutoSlide();
          }
        }, 1000);
      }
      function toggleAudio() {
        musicOn = !musicOn;
        audioBtn.setAttribute("aria-pressed", musicOn);
        if (musicOn) {
          audioBtn.classList.add('playing');
          audio.volume = 1;
          audio.play().catch(e => {});
        } else {
          audioBtn.classList.remove('playing');
          audio.pause();
        }
      }

      document.addEventListener('play', function(e) {
        if (e.target !== audio && (e.target.tagName === 'AUDIO' || e.target.tagName === 'VIDEO')) {
          if (musicOn) {
            audio.pause();
            audioBtn.classList.remove('playing');
            musicOn = false;
          }
        }
      }, true);

      function setupEventListeners() {
        prevBtn.onclick = () => { show(idx - 1); resetTimer(); };
        nextBtn.onclick = () => { show(idx + 1); resetTimer(); };
        slider.addEventListener('keydown', e => {
          if (e.key === 'ArrowLeft') { show(idx - 1); resetTimer(); e.preventDefault(); }
          if (e.key === 'ArrowRight') { show(idx + 1); resetTimer(); e.preventDefault(); }
        });
        let startX = 0;
        slider.addEventListener('touchstart', e => {
          if (e.touches.length > 1) return;
          startX = e.changedTouches[0].screenX;
        }, { passive: true });
        slider.addEventListener('touchend', e => {
          let endX = e.changedTouches[0].screenX;
          if (endX - startX > 20) { show(idx - 1); resetTimer(); }
          if (startX - endX > 20) { show(idx + 1); resetTimer(); }
        }, { passive: true });
        audioBtn.onclick = function(e) {
          e.stopPropagation();
          toggleAudio();
        };
        document.addEventListener('visibilitychange', () => {
          if (document.hidden) {
            audio.pause();
          } else if (musicOn) {
            audio.play().catch(e => {});
          }
        });
      }
      initSlider();
    })();
  </script>
</body>
</html>
